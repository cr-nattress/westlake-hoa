# Story 9.10: Data Model for Institutional Knowledge

## User Story

**As a** developer implementing Knowledge Base features
**I want** a well-structured data model for institutional information
**So that** all components can share consistent, typed data

## Description

Create the foundational data structure and TypeScript types for institutional knowledge. This includes HOA identity, contacts, board members, governance information, transparency issues, and enforcement data. This story is a prerequisite for all other stories in this epic.

## Acceptance Criteria

- [ ] All TypeScript interfaces defined and exported
- [ ] Data file created with all Knowledge Base information
- [ ] Data matches Knowledge Base README exactly
- [ ] Types are strict (no `any`)
- [ ] Data is easily updatable (clear structure)
- [ ] "Last updated" metadata included
- [ ] Exported for use across components and AI context

## Technical Details

### File Location

```
src/lib/data/institutional-knowledge.ts
src/types/institutional.ts
```

### Type Definitions

```typescript
// src/types/institutional.ts

export interface Address {
  line1: string;
  line2?: string;
  city: string;
  state: string;
  zip: string;
}

export interface HOAIdentity {
  legalName: string;
  dba: string;
  jurisdiction: string[];
  entityType: string;
  totalUnits: number;
  propertyName: string;
}

export type ContactType = 'management' | 'legal' | 'insurance' | 'board';

export interface ContactEntity {
  name: string;
  role: string;
  type: ContactType;
  mailingAddress?: Address;
  email?: string;
  emailDomains?: string[];
  phone?: string;
  platforms?: string[];
  responsibilities?: string[];
  notes?: string[];
}

export interface BoardMember {
  name: string;
  position: string;
  asOfDate: string;
}

export interface BoardAuthority {
  powers: string[];
  decisionMaking: {
    methods: string[];
    recordedVotes: string[];
  };
}

export type TransparencyCategory = 'communications' | 'governance' | 'health-safety' | 'records';

export interface CommunicationPattern {
  category: string;
  description: string;
  platforms?: string[];
}

export interface TransparencyIssue {
  category: TransparencyCategory;
  observation: string;
  context?: string;
}

export interface RecordsComparison {
  entitled: string[];
  restricted: string[];
  observedReality: string[];
}

export interface EnforcementStep {
  step: number;
  entity: string;
  action: string;
  description: string;
  timeframe?: string;
}

export interface InstitutionalKnowledge {
  hoaIdentity: HOAIdentity;
  contacts: ContactEntity[];
  boardMembers: BoardMember[];
  boardAuthority: BoardAuthority;
  communicationPatterns: CommunicationPattern[];
  transparencyIssues: TransparencyIssue[];
  recordsComparison: RecordsComparison;
  enforcementPath: EnforcementStep[];
  metadata: {
    lastUpdated: string;
    source: string;
  };
}
```

### Data File

```typescript
// src/lib/data/institutional-knowledge.ts

import type {
  HOAIdentity,
  ContactEntity,
  BoardMember,
  BoardAuthority,
  CommunicationPattern,
  TransparencyIssue,
  RecordsComparison,
  EnforcementStep,
  InstitutionalKnowledge
} from '@/types/institutional';

// HOA Identity
export const HOA_IDENTITY: HOAIdentity = {
  legalName: "Benchmark Condominium Homeowners Association",
  dba: "Westlake Village Condominium Association, Inc.",
  jurisdiction: [
    "Colorado Common Interest Ownership Act (CCIOA)",
    "Colorado Nonprofit Corporation Act"
  ],
  entityType: "Condominium Association (Non-profit corporation)",
  totalUnits: 92,
  propertyName: "Westlake Village Condominiums"
};

// Contacts
export const CONTACTS: ContactEntity[] = [
  {
    name: "Bold Property Management / Bold Solutions",
    role: "Day-to-day property management company",
    type: "management",
    mailingAddress: {
      line1: "PO Box 5800",
      city: "Avon",
      state: "CO",
      zip: "81620"
    },
    emailDomains: [
      "@boldsolutions.net",
      "@boldpropertymanagement.mailer.appfolio.us"
    ],
    platforms: ["AppFolio (automated notices, access requests, mass emails)"],
    responsibilities: [
      "Day-to-day property management",
      "Owner communications",
      "Vendor coordination",
      "Financial administration",
      "Record custodian (non-legal)",
      "Pest control coordination",
      "Maintenance scheduling",
      "Access requests to units",
      "Distribution of HOA notices",
      "Enforcement communications",
      "Record access facilitation (with Board approval where required)"
    ]
  },
  {
    name: "Alpenglow Law, LLC",
    role: "HOA General Counsel",
    type: "legal",
    responsibilities: [
      "HOA general counsel",
      "Collections oversight",
      "Governance compliance",
      "Formal legal correspondence"
    ],
    notes: [
      "Known Attorney: T.J. Voboril, Esq.",
      "Homeowners are often instructed to communicate through counsel once matters are escalated",
      "Counsel responses frequently reference Board authorization"
    ]
  },
  {
    name: "Mountain West Insurance & Financial Services, LLC",
    role: "Insurance Broker",
    type: "insurance",
    email: "claims@mtnwst.com",
    phone: "970-945-9111"
  }
];

// Historical address (for reference)
export const HISTORICAL_MANAGEMENT = {
  name: "Spaeth and Company, Inc.",
  note: "Previous/historical management company",
  address: {
    line1: "PO Box 3717",
    city: "Eagle",
    state: "CO",
    zip: "81631"
  }
};

// Board Members
export const BOARD_MEMBERS: BoardMember[] = [
  {
    name: "Mark Matz",
    position: "President",
    asOfDate: "November 2025"
  }
];

// Board Authority
export const BOARD_AUTHORITY: BoardAuthority = {
  powers: [
    "Adopts and amends policies, procedures, and rules",
    "Authorizes collections, legal actions, and referrals",
    "Retains legal counsel",
    "Oversees property management"
  ],
  decisionMaking: {
    methods: [
      "Board meetings (regular or special)",
      "Unanimous written consent"
    ],
    recordedVotes: [
      "Collections referrals to legal counsel",
      "Authorization of legal actions",
      "Foreclosure authorization"
    ]
  }
};

// Communication Patterns
export const COMMUNICATION_PATTERNS: CommunicationPattern[] = [
  {
    category: "Bulk Communications",
    description: "Bulk notices via AppFolio email",
    platforms: ["AppFolio"]
  },
  {
    category: "Compliance Requests",
    description: "Time-sensitive compliance and access requests"
  },
  {
    category: "Response Times",
    description: "Limited responsiveness to individual follow-ups"
  },
  {
    category: "Escalation",
    description: "Escalation to legal counsel for disputes or accommodations"
  }
];

// Transparency Issues
export const TRANSPARENCY_ISSUES: TransparencyIssue[] = [
  {
    category: "communications",
    observation: "Delayed or absent responses to owner emails"
  },
  {
    category: "communications",
    observation: "Requirement to route requests through counsel"
  },
  {
    category: "governance",
    observation: "Limited clarity on Board decisions and votes"
  },
  {
    category: "health-safety",
    observation: "Inconsistent follow-up on health/safety matters"
  },
  {
    category: "records",
    observation: "Records access often delayed"
  },
  {
    category: "records",
    observation: "Formal written requests frequently required"
  },
  {
    category: "records",
    observation: "Board approval sometimes used as a gating mechanism"
  }
];

// Records Comparison
export const RECORDS_COMPARISON: RecordsComparison = {
  entitled: [
    "Meeting minutes",
    "Financial summaries",
    "Budgets",
    "Insurance summaries",
    "Policies and procedures",
    "Records inspection per CCIOA"
  ],
  restricted: [
    "Attorney-client privileged materials",
    "Executive session contents",
    "Personal owner data"
  ],
  observedReality: [
    "Records access often delayed",
    "Formal written requests frequently required",
    "Board approval sometimes used as a gating mechanism"
  ]
};

// Enforcement Path
export const ENFORCEMENT_PATH: EnforcementStep[] = [
  {
    step: 1,
    entity: "Owner",
    action: "Receives Notice",
    description: "Owner receives violation notice or citation from management",
    timeframe: "Initial contact"
  },
  {
    step: 2,
    entity: "Bold Property Management",
    action: "Issues Warning",
    description: "Management issues formal warning and documents the violation",
    timeframe: "Within days of observation"
  },
  {
    step: 3,
    entity: "Board of Directors",
    action: "Reviews & Decides",
    description: "Board reviews the matter and decides on action (fines, remediation requirements)",
    timeframe: "At next meeting or via written consent"
  },
  {
    step: 4,
    entity: "Alpenglow Law, LLC",
    action: "Handles Escalation",
    description: "Legal counsel handles escalated matters, collections, or formal legal action",
    timeframe: "After Board authorization"
  }
];

// Metadata
export const KNOWLEDGE_BASE_METADATA = {
  lastUpdated: "January 2026",
  source: "docs/Westlake_Unofficial_HOA_Knowledge_Base_README.md"
};

// Combined export for convenience
export const INSTITUTIONAL_KNOWLEDGE: InstitutionalKnowledge = {
  hoaIdentity: HOA_IDENTITY,
  contacts: CONTACTS,
  boardMembers: BOARD_MEMBERS,
  boardAuthority: BOARD_AUTHORITY,
  communicationPatterns: COMMUNICATION_PATTERNS,
  transparencyIssues: TRANSPARENCY_ISSUES,
  recordsComparison: RECORDS_COMPARISON,
  enforcementPath: ENFORCEMENT_PATH,
  metadata: KNOWLEDGE_BASE_METADATA
};

// Utility functions
export function getContactByType(type: ContactEntity['type']): ContactEntity | undefined {
  return CONTACTS.find(c => c.type === type);
}

export function getIssuesByCategory(category: TransparencyIssue['category']): TransparencyIssue[] {
  return TRANSPARENCY_ISSUES.filter(i => i.category === category);
}
```

## Story Points: 3

## Priority: Critical

## Dependencies

- None (this is the foundation)

## Definition of Done

- [ ] All TypeScript types defined in src/types/institutional.ts
- [ ] All data populated in src/lib/data/institutional-knowledge.ts
- [ ] Data matches Knowledge Base README exactly
- [ ] Types exported from src/types/index.ts
- [ ] Utility functions implemented
- [ ] Metadata with last updated date included
- [ ] No TypeScript errors
- [ ] Can be imported by other stories' components
