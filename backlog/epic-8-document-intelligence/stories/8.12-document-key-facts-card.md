# Story 8.12: Document Key Facts Card

## User Story

**As a** resident viewing a document
**I want** to see key facts summarized at the top
**So that** I can quickly understand the most important information

## Description

Create a Key Facts card component that displays essential information from a document in a scannable format. Show bullet points with the most important dates, amounts, and requirements.

## Acceptance Criteria

- [ ] Displays 3-5 key facts per document
- [ ] Facts include dates, amounts, deadlines, key requirements
- [ ] Visual design is scannable (bullet points, icons)
- [ ] Different fact types for different document categories
- [ ] Falls back gracefully if no facts defined
- [ ] Links facts to relevant sections when possible

## Technical Details

### File Locations
- `src/lib/data/document-facts.ts` - Facts data
- `src/components/document-key-facts.tsx` - Component

### Facts Data Structure

```typescript
// src/lib/data/document-facts.ts

export interface DocumentFact {
  icon: 'calendar' | 'dollar' | 'alert' | 'check' | 'clock' | 'info';
  label: string;
  value: string;
  section?: string; // Anchor link if available
}

export interface DocumentFacts {
  slug: string;
  facts: DocumentFact[];
}

export const DOCUMENT_FACTS: DocumentFacts[] = [
  {
    slug: 'collections-policy-2025',
    facts: [
      { icon: 'calendar', label: 'Due Date', value: '1st of each month' },
      { icon: 'dollar', label: 'Late Fees', value: '$50 â†’ $150 â†’ $250/month' },
      { icon: 'dollar', label: 'Interest Rate', value: '8% annually' },
      { icon: 'clock', label: 'Payment Plans', value: 'Minimum 18 months' },
      { icon: 'alert', label: 'Attorney Referral', value: 'After 90 days' },
    ],
  },
  {
    slug: 'insurance-certificate-2025-2026',
    facts: [
      { icon: 'dollar', label: 'Property Coverage', value: '$22,460,000' },
      { icon: 'dollar', label: 'Liability', value: '$1,000,000 per occurrence' },
      { icon: 'dollar', label: 'Umbrella', value: '$10,000,000' },
      { icon: 'dollar', label: 'Deductible', value: '$15,000' },
      { icon: 'calendar', label: 'Policy Period', value: 'Oct 2025 - Oct 2026' },
    ],
  },
  {
    slug: 'rules-and-regulations-2018',
    facts: [
      { icon: 'check', label: 'Pets', value: '1 dog or cat per unit' },
      { icon: 'info', label: 'Parking', value: '2 spaces per unit' },
      { icon: 'clock', label: 'Quiet Hours', value: '10 PM - 8 AM' },
      { icon: 'alert', label: 'Violations', value: 'Warning â†’ $100 â†’ $200+ fines' },
      { icon: 'calendar', label: 'Heating Req', value: '55Â°F Oct 1 - May 30' },
    ],
  },
  {
    slug: 'bylaws',
    facts: [
      { icon: 'info', label: 'Voting', value: '1 vote per unit' },
      { icon: 'calendar', label: 'Annual Meeting', value: 'November' },
      { icon: 'info', label: 'Board Size', value: '3-7 directors' },
      { icon: 'info', label: 'Quorum', value: 'Majority of votes' },
    ],
  },
  {
    slug: 'records-inspection-policy-2025',
    facts: [
      { icon: 'clock', label: 'Response Time', value: '10 business days' },
      { icon: 'check', label: 'Available', value: 'Financials, minutes, contracts' },
      { icon: 'alert', label: 'Restricted', value: 'Attorney comms, personnel' },
    ],
  },
  {
    slug: 'enforcement-policy-2025',
    facts: [
      { icon: 'dollar', label: 'Max Fine (non-safety)', value: '$500' },
      { icon: 'alert', label: 'Safety Violations', value: 'Unlimited fines' },
      { icon: 'clock', label: 'Hearing Request', value: 'Within 5 days' },
    ],
  },
  // Add more documents...
];

export function getDocumentFacts(slug: string): DocumentFact[] | null {
  const facts = DOCUMENT_FACTS.find((f) => f.slug === slug);
  return facts?.facts || null;
}
```

### Component Implementation

```tsx
// src/components/document-key-facts.tsx
'use client';

import {
  Calendar,
  DollarSign,
  AlertTriangle,
  CheckCircle,
  Clock,
  Info,
} from 'lucide-react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { getDocumentFacts, type DocumentFact } from '@/lib/data/document-facts';

const ICONS = {
  calendar: Calendar,
  dollar: DollarSign,
  alert: AlertTriangle,
  check: CheckCircle,
  clock: Clock,
  info: Info,
};

interface DocumentKeyFactsProps {
  slug: string;
}

export function DocumentKeyFacts({ slug }: DocumentKeyFactsProps) {
  const facts = getDocumentFacts(slug);

  if (!facts || facts.length === 0) {
    return null;
  }

  return (
    <Card className="bg-muted/30">
      <CardHeader className="pb-3">
        <CardTitle className="text-base flex items-center gap-2">
          <Info className="h-4 w-4" />
          Key Facts
        </CardTitle>
      </CardHeader>
      <CardContent>
        <ul className="space-y-3">
          {facts.map((fact, index) => {
            const Icon = ICONS[fact.icon];
            return (
              <li key={index} className="flex items-start gap-3">
                <div className="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
                  <Icon className="h-4 w-4 text-primary" />
                </div>
                <div className="flex-1 min-w-0">
                  <p className="text-sm text-muted-foreground">{fact.label}</p>
                  <p className="font-medium">{fact.value}</p>
                </div>
              </li>
            );
          })}
        </ul>
      </CardContent>
    </Card>
  );
}
```

### Usage in Document Page

```tsx
// src/app/documents/[slug]/page.tsx

import { DocumentKeyFacts } from '@/components/document-key-facts';

// Place above main content or in sidebar
<div className="mb-6">
  <DocumentKeyFacts slug={document.slug} />
</div>
```

## Visual Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â„¹ï¸ Key Facts                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“…  Due Date                        â”‚
â”‚     1st of each month               â”‚
â”‚                                     â”‚
â”‚ ğŸ’µ  Late Fees                       â”‚
â”‚     $50 â†’ $150 â†’ $250/month         â”‚
â”‚                                     â”‚
â”‚ ğŸ’µ  Interest Rate                   â”‚
â”‚     8% annually                     â”‚
â”‚                                     â”‚
â”‚ â°  Payment Plans                   â”‚
â”‚     Minimum 18 months               â”‚
â”‚                                     â”‚
â”‚ âš ï¸  Attorney Referral               â”‚
â”‚     After 90 days                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Story Points: 3

## Priority: Medium

## Dependencies
- Story 8.2 (Populate Document Content) - need document slugs

## Definition of Done
- [ ] Facts data defined for 6+ key documents
- [ ] Component renders facts with icons
- [ ] Different icons for different fact types
- [ ] Graceful fallback when no facts
- [ ] Integrated into document detail page
- [ ] Mobile responsive
- [ ] Dark mode support
