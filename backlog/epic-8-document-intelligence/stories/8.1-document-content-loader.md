# Story 8.1: Document Content Loader

## User Story

**As a** developer
**I want** a utility function to load markdown content from README files
**So that** document records can be populated with actual content

## Description

Create a content loader module that reads markdown files from `docs/hoa-docs/readme/` and maps them to their corresponding PDF documents. This is the foundation for connecting extracted content to the website.

## Acceptance Criteria

- [ ] Function `loadDocumentContent(fileUrl: string)` returns markdown content or null
- [ ] PDF filename to README filename mapping is complete for all 18 documents
- [ ] Handles missing files gracefully (returns null, logs warning)
- [ ] Works in both server-side and build-time contexts
- [ ] TypeScript types are complete

## Technical Details

### File Location
`src/lib/data/load-document-content.ts`

### Implementation

```typescript
import fs from 'fs';
import path from 'path';

const README_DIR = path.join(process.cwd(), 'docs/hoa-docs/readme');

// Map PDF filenames to README filenames
const PDF_TO_README_MAP: Record<string, string> = {
  'DeclarationofCondominium.pdf': 'DeclarationofCondominium.md',
  'WestlakeBylaws.pdf': 'WestlakeBylaws.md',
  'Bylaws amended February 2025.pdf': 'Bylaws amended February 2025.md',
  'Articles of Incorporation 1979.pdf': 'Articles of Incorporation 1979.md',
  '2018.10 WLV Rules and Regs.pdf': '2018.10 WLV Rules and Regs.md',
  'Rules and Regulations Amended Adopted 2.21.20.pdf': 'Rules and Regulations Amended Adopted 2.21.20.md',
  'Westlake Village HOA - Responsible Governance Policies - Updated November 2025 - CLEAN - signed.pdf':
    'Westlake Village HOA - Responsible Governance Policies - Updated November 2025 - CLEAN - signed.md',
  'Declaration  recorded April 2025 w 10.16.25 amendment.pdf':
    'Declaration  recorded April 2025 w 10.16.25 amendment.md',
  'Governance Policies as of 10.1.2025.pdf': 'Governance Policies as of 10.1.2025.md',
  'Village Center Amended Restated Articles of Incorporation filed 4.10.25.pdf':
    'Village Center Amended Restated Articles of Incorporation filed 4.10.25.md',
  '25-26 UO Certificate.pdf': '25-26 UO Certificate.md',
  '25-26 UO Letter - Single Entity.pdf': '25-26 UO Letter - Single Entity.md',
  '25-26 Property Manager Reference Sheet.pdf': '25-26 Property Manager Reference Sheet.md',
  '24 -25 UO - Certficate.pdf': '24 -25 UO - Certficate.md',
  '24 -25 UO Letter - Single Entity.pdf': '24 -25 UO Letter - Single Entity.md',
  '24 -25  Property Manager Reference Sheet.pdf': '24 -25  Property Manager Reference Sheet.md',
  '24 -25 Umbrella.pdf': '24 -25 Umbrella.md',
  '24-25 Directors & Officers Liab &.Data.pdf': '24-25 Directors & Officers Liab &.Data.md',
};

export function loadDocumentContent(fileUrl: string): string | null {
  // Extract filename from URL (e.g., "/docs/WestlakeBylaws.pdf" -> "WestlakeBylaws.pdf")
  const filename = fileUrl.split('/').pop();
  if (!filename) return null;

  const readmeFilename = PDF_TO_README_MAP[filename];
  if (!readmeFilename) {
    console.warn(`No README mapping found for: ${filename}`);
    return null;
  }

  const readmePath = path.join(README_DIR, readmeFilename);

  try {
    return fs.readFileSync(readmePath, 'utf-8');
  } catch (error) {
    console.warn(`Failed to load README: ${readmePath}`, error);
    return null;
  }
}

export function getReadmeFilenames(): string[] {
  return Object.values(PDF_TO_README_MAP);
}
```

### Testing

```typescript
// Manual verification
import { loadDocumentContent } from './load-document-content';

const content = loadDocumentContent('/docs/WestlakeBylaws.pdf');
console.log(content ? 'Loaded successfully' : 'Failed to load');
console.log(`Content length: ${content?.length || 0} characters`);
```

## Story Points: 3

## Priority: Critical

## Dependencies
- None (first story in epic)

## Definition of Done
- [ ] Function implemented and exported
- [ ] All 18 PDF-to-README mappings complete
- [ ] TypeScript types complete
- [ ] Console warnings for missing files
- [ ] Manual testing confirms all documents load
