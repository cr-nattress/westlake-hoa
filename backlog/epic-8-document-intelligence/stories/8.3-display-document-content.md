# Story 8.3: Display Full Document Content

## User Story

**As a** resident viewing a document
**I want** to read the full document content on the website
**So that** I don't have to download and open PDFs

## Description

Update the document detail page to display the full markdown content from the document record. Add proper markdown rendering with styling that matches the site design.

## Acceptance Criteria

- [ ] Document detail page shows full content (not just summary)
- [ ] Markdown renders correctly (headers, lists, tables, bold, etc.)
- [ ] Content is styled consistently with site design
- [ ] Long documents have smooth scrolling
- [ ] Table of contents links work (if present in markdown)
- [ ] PDF download still available as alternative
- [ ] Falls back to summary if content is null

## Technical Details

### File to Modify
`src/app/documents/[slug]/page.tsx`

### Markdown Rendering

Use `react-markdown` with plugins:

```typescript
import ReactMarkdown from 'react-markdown';
import remarkGfm from 'remark-gfm';

// In the component
{document.content ? (
  <div className="prose prose-slate dark:prose-invert max-w-none">
    <ReactMarkdown remarkPlugins={[remarkGfm]}>
      {document.content}
    </ReactMarkdown>
  </div>
) : (
  <p className="text-muted-foreground">{document.summary}</p>
)}
```

### Dependencies to Add
```bash
npm install react-markdown remark-gfm
```

### Styling

Use Tailwind Typography plugin for prose styling:
```typescript
// Already in tailwind config
plugins: [require('@tailwindcss/typography')]
```

Custom overrides in component:
```typescript
<div className="prose prose-slate dark:prose-invert max-w-none
  prose-headings:scroll-mt-20
  prose-h1:text-2xl prose-h1:font-bold prose-h1:border-b prose-h1:pb-2
  prose-h2:text-xl prose-h2:font-semibold prose-h2:mt-8
  prose-h3:text-lg prose-h3:font-medium
  prose-table:text-sm
  prose-th:bg-muted prose-th:px-3 prose-th:py-2
  prose-td:px-3 prose-td:py-2 prose-td:border
">
```

### Layout Update

```tsx
// Document detail page structure
<div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
  {/* Main content - 2/3 width on desktop */}
  <div className="lg:col-span-2">
    <Card>
      <CardHeader>
        <div className="flex items-center gap-2 mb-2">
          <Badge>{document.type}</Badge>
          <Badge variant="outline">{document.status}</Badge>
        </div>
        <CardTitle>{document.title}</CardTitle>
        <CardDescription>{document.summary}</CardDescription>
      </CardHeader>
      <CardContent>
        {document.content ? (
          <div className="prose dark:prose-invert max-w-none">
            <ReactMarkdown remarkPlugins={[remarkGfm]}>
              {document.content}
            </ReactMarkdown>
          </div>
        ) : (
          <div className="text-center py-8">
            <p className="text-muted-foreground mb-4">
              Full content not available online.
            </p>
            <Button asChild>
              <a href={document.file_url} target="_blank">
                Download PDF
              </a>
            </Button>
          </div>
        )}
      </CardContent>
    </Card>
  </div>

  {/* Sidebar - 1/3 width on desktop */}
  <div className="lg:col-span-1">
    <DocumentChat document={document} />
  </div>
</div>
```

## Story Points: 3

## Priority: Critical

## Dependencies
- Story 8.2 (Populate Document Content)

## Definition of Done
- [ ] react-markdown and remark-gfm installed
- [ ] Document content renders as formatted markdown
- [ ] Headers, lists, tables, bold/italic all display correctly
- [ ] Dark mode styling works
- [ ] Mobile responsive layout maintained
- [ ] PDF download button still available
- [ ] No console errors
